# é¡¹ç›®æ¨¡å—åˆ†ææŠ¥å‘Š

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŠ å¯†è´§å¸ä¸Šå¸ç›‘æ§ç³»ç»Ÿï¼ŒåŒ…å«æ•°æ®é‡‡é›†ã€èåˆå¤„ç†ã€ä¿¡å·æ¨é€å’Œé“¾ä¸Šäº¤æ˜“æ‰§è¡Œå››å¤§åŠŸèƒ½æ¨¡å—ã€‚

---

## ğŸ—ï¸ æ¶æ„æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ•°æ®é‡‡é›†å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Collector A  â”‚  Collector B  â”‚  Collector C  â”‚ Telegram Monitorâ”‚
â”‚  14æ‰€äº¤æ˜“æ‰€   â”‚  åŒºå—é“¾+Twitterâ”‚  éŸ©å›½äº¤æ˜“æ‰€   â”‚   120+ é¢‘é“     â”‚
â”‚   REST/WS     â”‚   RPC/RSS     â”‚   REST/Bot    â”‚   Telethon      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ events:raw
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        èåˆå¤„ç†å±‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚    Fusion Engine v3     â”‚        Signal Router                  â”‚
â”‚    æœºæ„çº§è¯„åˆ†+èšåˆ       â”‚        è·¯ç”±: CEX/HL/DEX               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ events:fused / events:route:*
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        æ‰§è¡Œ/æ¨é€å±‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Webhook Pusherâ”‚ WeChat Pusher â”‚ Trade Executorâ”‚ Contract Finder â”‚
â”‚   n8n é›†æˆ    â”‚  ä¼ä¸šå¾®ä¿¡æ¨é€  â”‚  1inch DEX    â”‚  DexScreener    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1ï¸âƒ£ Collector A - äº¤æ˜“æ‰€ç›‘æ§

**æ–‡ä»¶**: `src/collectors/node_a/collector_a.py`

### åŠŸèƒ½
- ç›‘æ§ 14 å®¶äº¤æ˜“æ‰€çš„æ–°å¸ä¸Šçº¿
- REST API å®šæœŸè½®è¯¢å¸‚åœºåˆ—è¡¨
- WebSocket å®æ—¶ç›‘æ§ (Binance)
- è‡ªåŠ¨æ£€æµ‹æ–°äº¤æ˜“å¯¹

### æ”¯æŒçš„äº¤æ˜“æ‰€ API

| äº¤æ˜“æ‰€ | Tier | API ç±»å‹ | ç«¯ç‚¹ |
|--------|------|----------|------|
| **Binance** | T1 | REST + WS | `api.binance.com/api/v3/exchangeInfo` |
| **Coinbase** | T1 | REST | `api.exchange.coinbase.com/products` |
| **Kraken** | T1 | REST | `api.kraken.com/0/public/AssetPairs` |
| **OKX** | T2 | REST | `okx.com/api/v5/public/instruments` |
| **Bybit** | T2 | REST | `api.bybit.com/v5/market/instruments-info` |
| **KuCoin** | T2 | REST | `api.kucoin.com/api/v2/symbols` |
| **Gate.io** | T3 | REST | `api.gateio.ws/api/v4/spot/currency_pairs` |
| **Bitget** | T3 | REST | `api.bitget.com/api/v2/spot/public/symbols` |
| **HTX (Huobi)** | T3 | REST | `api.huobi.pro/v1/common/symbols` |
| **MEXC** | T3 | REST | `api.mexc.com/api/v3/exchangeInfo` |
| **Crypto.com** | T3 | REST | - |
| **Bitmart** | T3 | REST | - |
| **LBank** | T3 | REST | - |
| **Poloniex** | T3 | REST | - |

### ç¯å¢ƒå˜é‡
```bash
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
```

### è¾“å‡º
- Redis Stream: `events:raw`
- äº‹ä»¶ç±»å‹: `rest_api`, `ws_market`

---

## 2ï¸âƒ£ Collector B - åŒºå—é“¾ + Twitter + æ–°é—»

**æ–‡ä»¶**: `src/collectors/node_b/collector_b.py`

### åŠŸèƒ½
- åŒºå—é“¾èŠ‚ç‚¹ç›‘æ§ (Ethereum, BSC, Solana)
- Twitter/X å®˜æ–¹è´¦å·ç›‘æ§
- åŠ å¯†æ–°é—» RSS è®¢é˜…

### å¤–éƒ¨ API

| æœåŠ¡ | API ç±»å‹ | ç«¯ç‚¹/è¯´æ˜ |
|------|----------|-----------|
| **Ethereum RPC** | JSON-RPC | `eth.llamarpc.com` |
| **BSC RPC** | JSON-RPC | `bsc-dataseed.binance.org` |
| **Solana RPC** | JSON-RPC | `api.mainnet-beta.solana.com` |
| **Twitter API v2** | REST | Bearer Token è®¤è¯ |
| **CoinDesk RSS** | RSS | `coindesk.com/arc/outboundfeeds/rss/` |
| **CoinTelegraph RSS** | RSS | `cointelegraph.com/rss` |
| **The Block RSS** | RSS | `theblock.co/rss.xml` |
| **Decrypt RSS** | RSS | `decrypt.co/feed` |

### ç›‘æ§çš„ Twitter è´¦å·
```
@binance, @okx, @bybit_official, @gate_io
@kaborinance, @lookonchain, @spotonchain
@whale_alert, @EmberCN, @WuBlockchain
```

### ç¯å¢ƒå˜é‡
```bash
# Twitter API (å¿…éœ€)
TWITTER_BEARER_TOKEN=
TWITTER_API_KEY=
TWITTER_API_SECRET=
TWITTER_ACCESS_TOKEN=
TWITTER_ACCESS_SECRET=

# åŒºå—é“¾ RPC (å¯é€‰ï¼Œæœ‰é»˜è®¤å€¼)
ETH_RPC_URL=https://eth.llamarpc.com
BSC_RPC_URL=https://bsc-dataseed.binance.org
SOLANA_RPC_URL=https://api.mainnet-beta.solana.com
```

### è¾“å‡º
- Redis Stream: `events:raw`
- äº‹ä»¶ç±»å‹: `social_twitter`, `news`, `chain_contract`

---

## 3ï¸âƒ£ Collector C - éŸ©å›½äº¤æ˜“æ‰€ + Telegram Bot

**æ–‡ä»¶**: `src/collectors/node_c/collector_c.py`

### åŠŸèƒ½
- éŸ©å›½å››å¤§äº¤æ˜“æ‰€ç›‘æ§
- Telegram Bot æ¶ˆæ¯æ¥æ”¶
- å…¬å‘Šå…³é”®è¯åŒ¹é…

### éŸ©å›½äº¤æ˜“æ‰€ API

| äº¤æ˜“æ‰€ | API ç«¯ç‚¹ |
|--------|----------|
| **Upbit** | `api.upbit.com/v1/market/all` |
| **Bithumb** | `api.bithumb.com/public/ticker/ALL_KRW` |
| **Coinone** | `api.coinone.co.kr/public/v2/markets/KRW` |
| **Korbit** | `api.korbit.co.kr/v1/ticker/detailed/all` |

### ç¯å¢ƒå˜é‡
```bash
TELEGRAM_BOT_TOKEN=    # Telegram Bot API Token
```

### è¾“å‡º
- Redis Stream: `events:raw`
- äº‹ä»¶ç±»å‹: `kr_market`, `social_telegram`

---

## 4ï¸âƒ£ Telegram Monitor - å®æ—¶é¢‘é“ç›‘æ§

**æ–‡ä»¶**: `src/collectors/node_c/telegram_monitor.py`

### åŠŸèƒ½
- ä½¿ç”¨ Telethon åº“è®¢é˜… Telegram é¢‘é“
- 300ms-700ms ä½å»¶è¿Ÿ
- æ”¯æŒ 120+ é¢‘é“åŒæ—¶ç›‘æ§
- å…³é”®è¯åŒ¹é…å’Œä»£å¸ç¬¦å·æå–
- **ğŸ†• åˆçº¦åœ°å€è‡ªåŠ¨æå–**

### æŠ€æœ¯ç»†èŠ‚
- ä½¿ç”¨ `get_entities()` æ‰¹é‡è§£æé¢‘é“å®ä½“
- çœŸæ­£è®¢é˜… Telegram updates æµ
- éœ€è¦ `channels_resolved.json` é¢„è§£ææ–‡ä»¶

### ç¯å¢ƒå˜é‡
```bash
# Telethon API (å¿…éœ€)
TELEGRAM_API_ID=       # ä» https://my.telegram.org è·å–
TELEGRAM_API_HASH=     # ä» https://my.telegram.org è·å–

# å¯é€‰
TELEGRAM_BOT_TOKEN=
```

### ä¾èµ–æ–‡ä»¶
- `channels_resolved.json` - é¢„è§£æçš„é¢‘é“å®ä½“åˆ—è¡¨
- `*.session` - Telethon ä¼šè¯æ–‡ä»¶

### è¾“å‡º
- Redis Stream: `events:raw`
- äº‹ä»¶ç±»å‹: `social_telegram`
- **æ–°å¢å­—æ®µ**: `contract_address`, `chain`

---

## 5ï¸âƒ£ Fusion Engine v3 - èåˆè¯„åˆ†å¼•æ“

**æ–‡ä»¶**: `src/fusion/fusion_engine_v3.py`

### åŠŸèƒ½
- æœºæ„çº§è¯„åˆ†ç®—æ³•
- å¤šæºäº‹ä»¶èšåˆ
- å»é‡å’Œè¿‡æ»¤
- **ğŸ†• åˆçº¦åœ°å€ä¼ é€’**

### è¯„åˆ†é€»è¾‘
| æ¥æº | åŸºç¡€åˆ† | è¯´æ˜ |
|------|--------|------|
| Binance/Coinbase å…¬å‘Š | 90 | Tier-S æº |
| OKX/Bybit å…¬å‘Š | 80 | Tier-A æº |
| å®˜æ–¹ Twitter | 75 | ç¤¾äº¤åª’ä½“ |
| Alpha Telegram ç¾¤ | 60 | å†…éƒ¨æƒ…æŠ¥ |
| æ–°é—» RSS | 40 | å…¬å¼€æ–°é—» |

### ç¯å¢ƒå˜é‡
```bash
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
```

### è¾“å…¥/è¾“å‡º
- è¾“å…¥: `events:raw`
- è¾“å‡º: `events:fused`

---

## 6ï¸âƒ£ WeChat Pusher - ä¼ä¸šå¾®ä¿¡æ¨é€

**æ–‡ä»¶**: `src/fusion/wechat_pusher.py`

### åŠŸèƒ½
- æ ¼å¼åŒ–ä¸åŒç±»å‹çš„æ¶ˆæ¯
- æ˜¾ç¤ºè¯„åˆ†å’Œæ¥æºæ ‡ç­¾
- æ”¯æŒå¤šç§æ¶ˆæ¯ç±»å‹

### æ¶ˆæ¯ç±»å‹
- ğŸ“° æ–°é—»å¿«è®¯
- ğŸ¦ Twitter é€šçŸ¥
- ğŸ“© Telegram æ¶ˆæ¯
- âš¡ WebSocket æ–°å¸
- ğŸš€ CEX æ–°å¸ä¿¡å·
- ğŸ”— é“¾ä¸Šäº‹ä»¶

### ç¯å¢ƒå˜é‡
```bash
# ä¼ä¸šå¾®ä¿¡ Webhook (ä½¿ç”¨é»˜è®¤å€¼æˆ–ç¯å¢ƒå˜é‡)
WECHAT_WEBHOOK=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx

# æˆ–è€…ä½¿ç”¨å®Œæ•´é…ç½®
WECHAT_CORP_ID=
WECHAT_AGENT_ID=
WECHAT_SECRET=
```

---

## 7ï¸âƒ£ Contract Finder - åˆçº¦åœ°å€æœç´¢

**æ–‡ä»¶**: `src/execution/contract_finder.py`

### åŠŸèƒ½
- ä»å…¬å‘Šæ–‡æœ¬æå–åˆçº¦åœ°å€
- DexScreener API æœç´¢
- CoinGecko API æœç´¢
- åŒºå—é“¾æµè§ˆå™¨éªŒè¯
- ç­‰å¾…æ‰‹åŠ¨è¾“å…¥

### æ”¯æŒçš„é“¾
| é“¾ | åœ°å€æ ¼å¼ | æµè§ˆå™¨ API |
|----|----------|------------|
| Ethereum | `0x...` (40ä½) | etherscan.io |
| BSC | `0x...` (40ä½) | bscscan.com |
| Base | `0x...` (40ä½) | basescan.org |
| Arbitrum | `0x...` (40ä½) | arbiscan.io |
| Solana | Base58 (32-44ä½) | - |

### å¤–éƒ¨ API
| æœåŠ¡ | ç”¨é€” | API ç«¯ç‚¹ |
|------|------|----------|
| **DexScreener** | ä»£å¸æœç´¢ | `api.dexscreener.com/latest/dex/search` |
| **CoinGecko** | ä»£å¸ä¿¡æ¯ | `api.coingecko.com/api/v3` |
| **Etherscan** | åˆçº¦éªŒè¯ | `api.etherscan.io/api` |
| **BSCScan** | åˆçº¦éªŒè¯ | `api.bscscan.com/api` |

### ç¯å¢ƒå˜é‡
```bash
ETHERSCAN_API_KEY=
BSCSCAN_API_KEY=
BASESCAN_API_KEY=
COINGECKO_API_KEY=     # å¯é€‰
```

---

## 8ï¸âƒ£ Trade Executor - DEX äº¤æ˜“æ‰§è¡Œ

**æ–‡ä»¶**: `src/execution/trade_executor.py`

### åŠŸèƒ½
- 1inch API é›†æˆ
- é’±åŒ…ä½™é¢æŸ¥è¯¢
- Gas è´¹ç”¨ä¼°ç®—
- Token æˆæƒæ£€æŸ¥
- Swap äº¤æ˜“æ‰§è¡Œ

### æ”¯æŒçš„é“¾
| é“¾ | Chain ID | åŸç”Ÿä»£å¸ | RPC |
|----|----------|----------|-----|
| Ethereum | 1 | ETH | eth.llamarpc.com |
| BSC | 56 | BNB | bsc-dataseed.binance.org |
| Base | 8453 | ETH | mainnet.base.org |
| Arbitrum | 42161 | ETH | arb1.arbitrum.io/rpc |

### å¤–éƒ¨ API
| æœåŠ¡ | ç”¨é€” | API ç«¯ç‚¹ |
|------|------|----------|
| **1inch API v6** | DEX èšåˆ | `api.1inch.dev/swap/v6.0` |
| **åŒºå—é“¾ RPC** | äº¤æ˜“æ‰§è¡Œ | å„é“¾ RPC èŠ‚ç‚¹ |

### ç¯å¢ƒå˜é‡
```bash
# é’±åŒ…é…ç½® (âš ï¸ æ•æ„Ÿ)
WALLET_ADDRESS=0x...
ETH_PRIVATE_KEY=...

# 1inch API
ONEINCH_API_KEY=

# RPC èŠ‚ç‚¹
ETH_RPC_URL=
BSC_RPC_URL=
BASE_RPC_URL=
ARBITRUM_RPC_URL=

# äº¤æ˜“é…ç½®
DEX_DRY_RUN=true         # æ¨¡æ‹Ÿæ¨¡å¼
DEX_AMOUNT_ETH=0.01      # é»˜è®¤äº¤æ˜“é‡‘é¢
DEX_AMOUNT_BNB=0.1
```

---

## ğŸ“Š ç¯å¢ƒå˜é‡æ±‡æ€»

### å¿…éœ€å˜é‡
| å˜é‡ | æ¨¡å— | è¯´æ˜ |
|------|------|------|
| `REDIS_HOST` | å…¨éƒ¨ | Redis æœåŠ¡å™¨åœ°å€ |
| `REDIS_PORT` | å…¨éƒ¨ | Redis ç«¯å£ |
| `TELEGRAM_API_ID` | Telegram Monitor | Telethon API ID |
| `TELEGRAM_API_HASH` | Telegram Monitor | Telethon API Hash |

### æ¨èå˜é‡
| å˜é‡ | æ¨¡å— | è¯´æ˜ |
|------|------|------|
| `WECHAT_WEBHOOK` | WeChat Pusher | ä¼ä¸šå¾®ä¿¡ Webhook URL |
| `ETHERSCAN_API_KEY` | Contract Finder | åˆçº¦éªŒè¯ |

### å¯é€‰å˜é‡ (æŒ‰åŠŸèƒ½)
| åŠŸèƒ½ | å˜é‡ |
|------|------|
| Twitter ç›‘æ§ | `TWITTER_BEARER_TOKEN`, `TWITTER_API_KEY`, ... |
| DEX äº¤æ˜“ | `WALLET_ADDRESS`, `ETH_PRIVATE_KEY`, `ONEINCH_API_KEY` |
| äº¤æ˜“æ‰€ API | `GATE_KEY`, `MEXC_KEY`, `BYBIT_KEY`, ... |

---

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æœ€å°é…ç½® (.env)
```bash
# Redis
REDIS_HOST=127.0.0.1
REDIS_PORT=6379

# Telegram (å¿…éœ€)
TELEGRAM_API_ID=your_api_id
TELEGRAM_API_HASH=your_api_hash

# ä¼ä¸šå¾®ä¿¡æ¨é€
WECHAT_WEBHOOK=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=xxx
```

### å¯åŠ¨å‘½ä»¤
```bash
# ç»Ÿä¸€å¯åŠ¨ï¼ˆæ¨èï¼‰
python -m src.unified_runner

# æˆ–å•ç‹¬å¯åŠ¨
python -m src.collectors.node_a.collector_a
python -m src.collectors.node_b.collector_b
python -m src.collectors.node_c.telegram_monitor
python -m src.fusion.fusion_engine_v3
```

